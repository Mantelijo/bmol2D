var en=Object.defineProperty;var ft=Object.getOwnPropertySymbols;var tn=Object.prototype.hasOwnProperty,nn=Object.prototype.propertyIsEnumerable;var Pe=(t,e,n)=>e in t?en(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ee=(t,e)=>{for(var n in e||(e={}))tn.call(e,n)&&Pe(t,n,e[n]);if(ft)for(var n of ft(e))nn.call(e,n)&&Pe(t,n,e[n]);return t};var rn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var N=(t,e,n)=>(Pe(t,typeof e!="symbol"?e+"":e,n),n);import{j as ze,r as E,m as ut,l as an,s as sn,a as Be,d as on,z as ln,b as cn,c as dn,R as Ue,e as fn,f as un}from"./vendor.6ce915f8.js";var Mr=rn((Dr,at)=>{const hn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}};hn();class x{constructor(e,n,i){this.x=e,this.y=n,this.z=i,this.x=e||0,this.y=n||0,this.z=i||0}negative(){return new x(-this.x,-this.y,-this.z)}add(e){return e instanceof x?new x(this.x+e.x,this.y+e.y,this.z+e.z):new x(this.x+e,this.y+e,this.z+e)}subtract(e){return e instanceof x?new x(this.x-e.x,this.y-e.y,this.z-e.z):new x(this.x-e,this.y-e,this.z-e)}multiply(e){return e instanceof x?new x(this.x*e.x,this.y*e.y,this.z*e.z):new x(this.x*e,this.y*e,this.z*e)}divide(e){return e instanceof x?new x(this.x/e.x,this.y/e.y,this.z/e.z):new x(this.x/e,this.y/e,this.z/e)}equals(e){return this.x==e.x&&this.y==e.y&&this.z==e.z}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}cross(e){return new x(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}length(){return Math.sqrt(this.dot(this))}magnitude(){return this.length()}unit(){return this.divide(this.length())}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toAngles(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}}angleTo(e){return Math.acos(this.dot(e)/(this.length()*e.length()))}toArray(e){return[this.x,this.y,this.z].slice(0,e||3)}toCoord(){return new Ae(this.x,this.y,this.z)}clone(){return new x(this.x,this.y,this.z)}init(e,n,i){return this.x=e,this.y=n,this.z=i,this}normalize(){return this.unit()}setIndex(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break}}distanceTo(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2)+Math.pow(this.z-e.z,2))}static negative(e,n,i){return n.x=-e.x,n.y=-e.y,n.z=-e.z,n}static add(e,n,i){return n instanceof x?(i.x=e.x+n.x,i.y=e.y+n.y,i.z=e.z+n.z):(i.x=e.x+n,i.y=e.y+n,i.z=e.z+n),i}static subtract(e,n,i){return n instanceof x?(i.x=e.x-n.x,i.y=e.y-n.y,i.z=e.z-n.z):(i.x=e.x-n,i.y=e.y-n,i.z=e.z-n),i}static multiply(e,n,i){return n instanceof x?(i.x=e.x*n.x,i.y=e.y*n.y,i.z=e.z*n.z):(i.x=e.x*n,i.y=e.y*n,i.z=e.z*n),i}static divide(e,n,i){return n instanceof x?(i.x=e.x/n.x,i.y=e.y/n.y,i.z=e.z/n.z):(i.x=e.x/n,i.y=e.y/n,i.z=e.z/n),i}static cross(e,n,i){return i.x=e.y*n.z-e.z*n.y,i.y=e.z*n.x-e.x*n.z,i.z=e.x*n.y-e.y*n.x,i}static unit(e,n,i){var s=e.length();return n.x=e.x/s,n.y=e.y/s,n.z=e.z/s,n}static fromAngles(e,n){return new x(Math.cos(e)*Math.cos(n),Math.sin(n),Math.sin(e)*Math.cos(n))}static randomDirection(){return x.fromAngles(Math.random()*Math.PI*2,Math.asin(Math.random()*2-1))}static min(e,n,i){return new x(Math.min(e.x,n.x),Math.min(e.y,n.y),Math.min(e.z,n.z))}static max(e,n,i){return new x(Math.max(e.x,n.x),Math.max(e.y,n.y),Math.max(e.z,n.z))}static lerp(e,n,i){return n.subtract(e).multiply(i).add(e)}static fromArray(e){return new x(e[0],e[1],e[2])}static angleBetween(e,n,i){return e.angleTo(n)}static infinity(){return new x(1/0,1/0,1/0)}}class Ae{constructor(e,n,i){this.x=e,this.y=n,this.z=i}toVec(){return x.fromArray(this.toArray())}toArray(){return[this.x,this.y,this.z]}}var ht;(function(t){t.A="\u03B1",t.B="\u03B2",t.G="\u03B3",t.D="\u03B4",t.E="\u03B5",t.Z="\u03B6",t.H="\u03B7"})(ht||(ht={}));class mn{constructor(e){N(this,"center");N(this,"interactions");N(this,"atoms");N(this,"v");N(this,"o");N(this,"hash");N(this,"name");N(this,"sequenceNumber");N(this,"polymerChainIdentifier");N(this,"initial_x");N(this,"initial_y");N(this,"watsonCrickPairResidueIndex",-1);this.indexInPolymer=e,this.atoms=[],this.name="",this.sequenceNumber=-1,this.center=new Ae(-1,-1,-1),this.hash="",this.interactions=[],this.polymerChainIdentifier="",this.v=x.infinity(),this.o=x.infinity()}findAtomsByNames(e){const n=[];return this.atoms.forEach(i=>{e.indexOf(i.name)!==-1&&n.push(i)}),n.sort((i,s)=>e.indexOf(i.name)-e.indexOf(s.name)),n}}var A;(function(t){t.DA="DA",t.DG="DG",t.DC="DC",t.DT="DT",t.CM="5CM"})(A||(A={}));var I;(function(t){t.A="A",t.C="C",t.G="G",t.I="I",t.U="U"})(I||(I={}));var mt;(function(t){t[t.Ala=0]="Ala",t[t.Arg=1]="Arg",t[t.Asn=2]="Asn",t[t.Asp=3]="Asp",t[t.Cys=4]="Cys",t[t.Glu=5]="Glu",t[t.Gln=6]="Gln",t[t.Gly=7]="Gly",t[t.His=8]="His",t[t.Ile=9]="Ile",t[t.Leu=10]="Leu",t[t.Lys=11]="Lys",t[t.Met=12]="Met",t[t.Phe=13]="Phe",t[t.Pro=14]="Pro",t[t.Ser=15]="Ser",t[t.Thr=16]="Thr",t[t.Trp=17]="Trp",t[t.Tyr=18]="Tyr",t[t.Val=19]="Val"})(mt||(mt={}));var L;(function(t){t.DNA="DNA",t.RNA="RNA",t.Protein="Protein",t.Unknown="Unknown"})(L||(L={}));function pn(t){switch(!0){case t.residueName in A:return L.DNA;case t.residueName in I:return L.RNA;default:return L.Protein}}const f=ze.exports.jsx,m=ze.exports.jsxs,We=ze.exports.Fragment,Ge={polymers:[],pdb:void 0,isLoading:!1,isWasmModuleLoading:!0,simpleStuffy:"",hashedNucleicAcidResidues:{},viz:{chain1:null,chain2:null},currentPDBId:"",error:"",selectedResidueHash:void 0,secondaryStructures:[],iFinderInstance:void 0,getResidue:function(t,e){if(this.polymers.length===0)return null;const n=this.polymers.filter(i=>i.chainIdentifier===t);if(n.length>0){const i=n[0].residues.filter(s=>s.hash===e);if(i.length>0)return i[0]}return null},getResidueByHashOnly:function(t){for(let e=0;e<this.polymers.length;e++){const n=this.polymers[e];for(let i=0;i<n.residues.length;i++)if(n.residues[i].hash===t)return n.residues[i]}return null},getPolymer:function(t){if(this.polymers){const e=this.polymers.filter(n=>n.chainIdentifier===t);if(e.length>0)return e[0]}return null}},ue=E.exports.createContext([Ge,()=>{}]),yn=(t,{type:e,payload:n})=>{switch(e){case"resetState":return Ee({},Ge);default:if(e in t)t[e]=n;else throw new Error(`${e} not found in state`)}return Ee({},t)},pt={sampleStructures:new Map,currentlySelectedSamplePDBID:void 0,showSamplesModal:!1},Se=E.exports.createContext([pt,()=>{}]),gn=(t,{type:e,payload:n})=>{switch(e){default:if(e in t)t[e]=n;else throw new Error(`${e} not found in state`)}return Ee({},t)},bn=({children:t})=>{const[e,n]=E.exports.useReducer(yn,Ge),[i,s]=E.exports.useReducer(gn,pt);return f(ue.Provider,{value:[e,n],children:f(Se.Provider,{value:[i,s],children:t})})};function yt(t){return t.residues.forEach((e,n)=>{const i=new Ae(0,0,0);e.atoms.forEach(s=>{i.x+=s.coords.x,i.y+=s.coords.y,i.z+=s.coords.z}),i.x=i.x/e.atoms.length,i.y=i.y/e.atoms.length,i.z=i.z/e.atoms.length,t.residues[n].center=i}),t}var He;(function(t){t.Threshold="Distance",t.HBond="H Bond"})(He||(He={}));const xn=1.42,gt=t=>{if([L.DNA,L.RNA].indexOf(t.kind)!=-1){let e=["C2","C4","C6"];t.residues.forEach(n=>{let i=[];if(n.findAtomsByNames(e).forEach((c,o)=>{i[o]=c.coords}),i.length===3){const c=x.fromArray(i[0].toArray()),o=x.fromArray(i[1].toArray()),l=x.fromArray(i[2].toArray()),d=o.subtract(c).cross(l.subtract(c)).normalize(),g=c.add(o).add(l).divide(3);n.v=d,n.o=g}})}return t};function _n(t,e){const n=[[A.DA,A.DT],[A.DA,I.U],[A.DT,I.A],[A.DC,A.DG],[A.DC,I.G],[A.DG,A.DC],[A.DG,I.C],[I.C,I.G],[I.A,I.U],[A.CM,A.DG],[A.CM,I.G],[I.G,I.U]];for(let i=0;i<n.length;i++)if(t.name===n[i][0]&&e.name===n[i][1]||t.name===n[i][1]&&e.name===n[i][0])return!0;return!1}var wn="/assets/naview.1d8aa8be.wasm",a=typeof a!="undefined"?a:{};a.locateFile=function(t,e){return wn};window.Module=a;var bt=Object.assign({},a),Te=(t,e)=>{throw e},je=typeof window=="object",le=typeof importScripts=="function",xt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_t=!je&&!xt&&!le;if(a.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var q="";function vn(t){return a.locateFile?a.locateFile(t,q):q+t}var ke,he,ce;function wt(t){if(t instanceof nt)return;let e=t;t&&typeof t=="object"&&t.stack&&(e=[t,t.stack]),F("exiting due to exception: "+e)}var Ye,Ie,qe;if(xt){if(!(typeof process=="object"&&typeof require=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");le?q=require("path").dirname(q)+"/":q=__dirname+"/",qe=()=>{Ie||(Ye=require("fs"),Ie=require("path"))},ke=function(e,n){return qe(),e=Ie.normalize(e),Ye.readFileSync(e,n?void 0:"utf8")},ce=t=>{var e=ke(t,!0);return e.buffer||(e=new Uint8Array(e)),p(e.buffer),e},he=(t,e,n)=>{qe(),t=Ie.normalize(t),Ye.readFile(t,function(i,s){i?n(i):e(s.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),typeof at!="undefined"&&(at.exports=a),process.on("uncaughtException",function(t){if(!(t instanceof nt))throw t}),process.on("unhandledRejection",function(t){throw t}),Te=(t,e)=>{if(Qe())throw process.exitCode=t,e;wt(e),process.exit(t)},a.inspect=function(){return"[Emscripten Module object]"}}else if(_t){if(typeof process=="object"&&typeof require=="function"||typeof window=="object"||typeof importScripts=="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");typeof read!="undefined"&&(ke=function(e){return read(e)}),ce=function(e){let n;return typeof readbuffer=="function"?new Uint8Array(readbuffer(e)):(n=read(e,"binary"),p(typeof n=="object"),n)},he=function(e,n,i){setTimeout(()=>n(ce(e)),0)},typeof scriptArgs!="undefined"?scriptArgs:typeof arguments!="undefined"&&arguments,typeof quit=="function"&&(Te=(t,e)=>{wt(e),quit(t)}),typeof print!="undefined"&&(typeof console=="undefined"&&(console={}),console.log=print,console.warn=console.error=typeof printErr!="undefined"?printErr:print)}else if(je||le){if(le?q=self.location.href:typeof document!="undefined"&&document.currentScript&&(q=document.currentScript.src),q.indexOf("blob:")!==0?q=q.substr(0,q.replace(/[?#].*/,"").lastIndexOf("/")+1):q="",!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");ke=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},le&&(ce=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),he=(t,e,n)=>{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=()=>{if(i.status==200||i.status==0&&i.response){e(i.response);return}n()},i.onerror=n,i.send(null)}}else throw new Error("environment detection error");var Me=a.print||console.log.bind(console),F=a.printErr||console.warn.bind(console);Object.assign(a,bt);bt=null;er();a.arguments;X("arguments","arguments_");a.thisProgram;X("thisProgram","thisProgram");a.quit&&(Te=a.quit);X("quit","quit_");p(typeof a.memoryInitializerPrefixURL=="undefined","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead");p(typeof a.pthreadMainPrefixURL=="undefined","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead");p(typeof a.cdInitializerPrefixURL=="undefined","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead");p(typeof a.filePackagePrefixURL=="undefined","Module.filePackagePrefixURL option was removed, use Module.locateFile instead");p(typeof a.read=="undefined","Module.read option was removed (modify read_ in JS)");p(typeof a.readAsync=="undefined","Module.readAsync option was removed (modify readAsync in JS)");p(typeof a.readBinary=="undefined","Module.readBinary option was removed (modify readBinary in JS)");p(typeof a.setWindowTitle=="undefined","Module.setWindowTitle option was removed (modify setWindowTitle in JS)");p(typeof a.TOTAL_MEMORY=="undefined","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY");X("read","read_");X("readAsync","readAsync");X("readBinary","readBinary");X("setWindowTitle","setWindowTitle");p(!_t,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");function te(t){te.shown||(te.shown={}),te.shown[t]||(te.shown[t]=1,F(t))}function X(t,e){Object.getOwnPropertyDescriptor(a,t)||Object.defineProperty(a,t,{configurable:!0,get:function(){U("Module."+t+" has been replaced with plain "+e+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function En(t){Object.getOwnPropertyDescriptor(a,t)&&U("`Module."+t+"` was supplied but `"+t+"` not included in INCOMING_MODULE_JS_API")}function vt(t,e){var n="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";return e&&(n+=". Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you"),n}function Et(t,e){Object.getOwnPropertyDescriptor(a,t)||Object.defineProperty(a,t,{configurable:!0,get:function(){U(vt(t,e))}})}function r(t,e){Object.getOwnPropertyDescriptor(a,t)||(a[t]=()=>U(vt(t,e)))}var me;a.wasmBinary&&(me=a.wasmBinary);X("wasmBinary","wasmBinary");var An=a.noExitRuntime||!0;X("noExitRuntime","noExitRuntime");typeof WebAssembly!="object"&&U("no native wasm support detected");function Sn(t,e="i8",n){switch(e.charAt(e.length-1)==="*"&&(e="i32"),e){case"i1":return ye[t>>0];case"i8":return ye[t>>0];case"i16":return It[t>>1];case"i32":return K[t>>2];case"i64":return K[t>>2];case"float":return Mt[t>>2];case"double":return Number(Ct[t>>3]);default:U("invalid type for getValue: "+e)}return null}var Ve,pe=!1;function p(t,e){t||U("Assertion failed"+(e?": "+e:""))}function Tn(t){var e=a["_"+t];return p(e,"Cannot call unknown function "+t+", make sure it is exported"),e}function At(t,e,n,i,s){var c={string:function(k){var D=0;if(k!=null&&k!==0){var b=(k.length<<2)+1;D=Wt(b),Mn(k,D,b)}return D},array:function(k){var D=Wt(k.length);return Cn(k,D),D}};function o(k){return e==="string"?kt(k):e==="boolean"?Boolean(k):k}var l=Tn(t),d=[],g=0;if(p(e!=="array",'Return type should not be "array".'),i)for(var S=0;S<i.length;S++){var _=c[n[S]];_?(g===0&&(g=nr()),d[S]=_(i[S])):d[S]=i[S]}var T=l.apply(null,d);function P(k){return g!==0&&rr(g),o(k)}return T=P(T),T}function kn(t,e,n,i){return function(){return At(t,e,n,arguments)}}var St=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function Tt(t,e,n){for(var i=e+n,s=e;t[s]&&!(s>=i);)++s;if(s-e>16&&t.subarray&&St)return St.decode(t.subarray(e,s));for(var c="";e<s;){var o=t[e++];if(!(o&128)){c+=String.fromCharCode(o);continue}var l=t[e++]&63;if((o&224)==192){c+=String.fromCharCode((o&31)<<6|l);continue}var d=t[e++]&63;if((o&240)==224?o=(o&15)<<12|l<<6|d:((o&248)!=240&&te("Invalid UTF-8 leading byte 0x"+o.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),o=(o&7)<<18|l<<12|d<<6|t[e++]&63),o<65536)c+=String.fromCharCode(o);else{var g=o-65536;c+=String.fromCharCode(55296|g>>10,56320|g&1023)}}return c}function kt(t,e){return t?Tt(de,t,e):""}function In(t,e,n,i){if(!(i>0))return 0;for(var s=n,c=n+i-1,o=0;o<t.length;++o){var l=t.charCodeAt(o);if(l>=55296&&l<=57343){var d=t.charCodeAt(++o);l=65536+((l&1023)<<10)|d&1023}if(l<=127){if(n>=c)break;e[n++]=l}else if(l<=2047){if(n+1>=c)break;e[n++]=192|l>>6,e[n++]=128|l&63}else if(l<=65535){if(n+2>=c)break;e[n++]=224|l>>12,e[n++]=128|l>>6&63,e[n++]=128|l&63}else{if(n+3>=c)break;l>1114111&&te("Invalid Unicode code point 0x"+l.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),e[n++]=240|l>>18,e[n++]=128|l>>12&63,e[n++]=128|l>>6&63,e[n++]=128|l&63}}return e[n]=0,n-s}function Mn(t,e,n){return p(typeof n=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),In(t,de,e,n)}typeof TextDecoder!="undefined"&&new TextDecoder("utf-16le");function Cn(t,e){p(t.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),ye.set(t,e)}var ye,de,It,K,Ke,Mt,Ct;function Nn(t){a.HEAP8=ye=new Int8Array(t),a.HEAP16=It=new Int16Array(t),a.HEAP32=K=new Int32Array(t),a.HEAPU8=de=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAPU32=Ke=new Uint32Array(t),a.HEAPF32=Mt=new Float32Array(t),a.HEAPF64=Ct=new Float64Array(t)}var Xe=5242880;a.TOTAL_STACK&&p(Xe===a.TOTAL_STACK,"the stack size can no longer be determined at runtime");var $e=a.INITIAL_MEMORY||16777216;X("INITIAL_MEMORY","INITIAL_MEMORY");p($e>=Xe,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+$e+"! (TOTAL_STACK="+Xe+")");p(typeof Int32Array!="undefined"&&typeof Float64Array!="undefined"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support");p(!a.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally");p($e==16777216,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically");var Ce;function Nt(){var t=tt();p((t&3)==0),K[t>>2]=34821223,K[t+4>>2]=2310721022,K[0]=1668509029}function ge(){if(!pe){var t=tt(),e=Ke[t>>2],n=Ke[t+4>>2];(e!=34821223||n!=2310721022)&&U("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+n.toString(16)+" 0x"+e.toString(16)),K[0]!==1668509029&&U("Runtime error: The application has corrupted its heap memory area (address zero)!")}}(function(){var t=new Int16Array(1),e=new Int8Array(t.buffer);if(t[0]=25459,e[0]!==115||e[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"})();var Dt=[],Ft=[],Rt=[],Je=!1,Ot=!1,Dn=0;function Qe(){return An||Dn>0}function Fn(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)Pn(a.preRun.shift());et(Dt)}function Rn(){ge(),p(!Je),Je=!0,et(Ft)}function On(){ge(),Ot=!0}function Ln(){if(ge(),a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)Bn(a.postRun.shift());et(Rt)}function Pn(t){Dt.unshift(t)}function zn(t){Ft.unshift(t)}function Bn(t){Rt.unshift(t)}p(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");p(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");p(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");p(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var re=0,ie=null,be=null,xe={};function Un(t){re++,a.monitorRunDependencies&&a.monitorRunDependencies(re),t?(p(!xe[t]),xe[t]=1,ie===null&&typeof setInterval!="undefined"&&(ie=setInterval(function(){if(pe){clearInterval(ie),ie=null;return}var e=!1;for(var n in xe)e||(e=!0,F("still waiting on run dependencies:")),F("dependency: "+n);e&&F("(end of list)")},1e4))):F("warning: run dependency added without ID")}function Wn(t){if(re--,a.monitorRunDependencies&&a.monitorRunDependencies(re),t?(p(xe[t]),delete xe[t]):F("warning: run dependency removed without ID"),re==0&&(ie!==null&&(clearInterval(ie),ie=null),be)){var e=be;be=null,e()}}a.preloadedImages={};a.preloadedAudios={};function U(t){a.onAbort&&a.onAbort(t),t="Aborted("+t+")",F(t),pe=!0;var e=new WebAssembly.RuntimeError(t);throw e}var V={error:function(){U("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){V.error()},createDataFile:function(){V.error()},createPreloadedFile:function(){V.error()},createLazyFile:function(){V.error()},open:function(){V.error()},mkdev:function(){V.error()},registerDevice:function(){V.error()},analyzePath:function(){V.error()},loadFilesFromDB:function(){V.error()},ErrnoError:function(){V.error()}};a.FS_createDataFile=V.createDataFile;a.FS_createPreloadedFile=V.createPreloadedFile;var Gn="data:application/octet-stream;base64,";function Lt(t){return t.startsWith(Gn)}function Ze(t){return t.startsWith("file://")}function J(t,e){return function(){var n=t,i=e;return e||(i=a.asm),p(Je,"native function `"+n+"` called before runtime initialization"),p(!Ot,"native function `"+n+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),i[t]||p(i[t],"exported native function `"+n+"` not found"),i[t].apply(null,arguments)}}var z;z="naview.wasm";Lt(z)||(z=vn(z));function Pt(t){try{if(t==z&&me)return new Uint8Array(me);if(ce)return ce(t);throw"both async and sync fetching of the wasm failed"}catch(e){U(e)}}function Hn(){if(!me&&(je||le)){if(typeof fetch=="function"&&!Ze(z))return fetch(z,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+z+"'";return t.arrayBuffer()}).catch(function(){return Pt(z)});if(he)return new Promise(function(t,e){he(z,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return Pt(z)})}function jn(){var t={env:Bt,wasi_snapshot_preview1:Bt};function e(l,d){var g=l.exports;a.asm=g,Ve=a.asm.memory,p(Ve,"memory not found in wasm exports"),Nn(Ve.buffer),Ce=a.asm.__indirect_function_table,p(Ce,"table not found in wasm exports"),zn(a.asm.__wasm_call_ctors),Wn("wasm-instantiate")}Un("wasm-instantiate");var n=a;function i(l){p(a===n,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),n=null,e(l.instance)}function s(l){return Hn().then(function(d){return WebAssembly.instantiate(d,t)}).then(function(d){return d}).then(l,function(d){F("failed to asynchronously prepare wasm: "+d),Ze(z)&&F("warning: Loading from a file URI ("+z+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),U(d)})}function c(){return!me&&typeof WebAssembly.instantiateStreaming=="function"&&!Lt(z)&&!Ze(z)&&typeof fetch=="function"?fetch(z,{credentials:"same-origin"}).then(function(l){var d=WebAssembly.instantiateStreaming(l,t);return d.then(i,function(g){return F("wasm streaming compile failed: "+g),F("falling back to ArrayBuffer instantiation"),s(i)})}):s(i)}if(a.instantiateWasm)try{var o=a.instantiateWasm(t,e);return o}catch(l){return F("Module.instantiateWasm callback failed with error: "+l),!1}return c(),{}}function et(t){for(;t.length>0;){var e=t.shift();if(typeof e=="function"){e(a);continue}var n=e.func;typeof n=="number"?e.arg===void 0?zt(n)():zt(n)(e.arg):n(e.arg===void 0?null:e.arg)}}var Ne=[];function zt(t){var e=Ne[t];return e||(t>=Ne.length&&(Ne.length=t+1),Ne[t]=e=Ce.get(t)),p(Ce.get(t)==e,"JavaScript-side Wasm function table mirror is out of date!"),e}function Yn(t,e,n){de.copyWithin(t,e,e+n)}function qn(t){U("Cannot enlarge memory arrays to size "+t+" bytes (OOM). Either (1) compile with  -s INITIAL_MEMORY=X  with X higher than the current value "+ye.length+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function Vn(t){de.length,t=t>>>0,qn(t)}function Kn(t){sr(t)}var ne={buffers:[null,[],[]],printChar:function(t,e){var n=ne.buffers[t];p(n),e===0||e===10?((t===1?Me:F)(Tt(n,0)),n.length=0):n.push(e)},varargs:void 0,get:function(){p(ne.varargs!=null),ne.varargs+=4;var t=K[ne.varargs-4>>2];return t},getStr:function(t){var e=kt(t);return e},get64:function(t,e){return t>=0?p(e===0):p(e===-1),t}};function Xn(t){return U("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM"),0}function $n(t,e,n,i,s){U("it should not be possible to operate on streams when !SYSCALLS_REQUIRE_FILESYSTEM")}function Jn(){tr();var t=ne.buffers;t[1].length&&ne.printChar(1,10),t[2].length&&ne.printChar(2,10)}function Qn(t,e,n,i){for(var s=0,c=0;c<n;c++){var o=K[e>>2],l=K[e+4>>2];e+=8;for(var d=0;d<l;d++)ne.printChar(t,de[o+d]);s+=l}return K[i>>2]=s,0}function Zn(t){}function er(){En("fetchSettings")}var Bt={emscripten_memcpy_big:Yn,emscripten_resize_heap:Vn,exit:Kn,fd_close:Xn,fd_seek:$n,fd_write:Qn,setTempRet0:Zn};jn();a.___wasm_call_ctors=J("__wasm_call_ctors");a._secondaryStructureFromPairTable=J("secondaryStructureFromPairTable");a._secondaryStructureFromDotBraket=J("secondaryStructureFromDotBraket");a.___errno_location=J("__errno_location");var tr=a.___stdio_exit=J("__stdio_exit"),Ut=a._emscripten_stack_init=function(){return(Ut=a._emscripten_stack_init=a.asm.emscripten_stack_init).apply(null,arguments)};a._emscripten_stack_get_free=function(){return(a._emscripten_stack_get_free=a.asm.emscripten_stack_get_free).apply(null,arguments)};a._emscripten_stack_get_base=function(){return(a._emscripten_stack_get_base=a.asm.emscripten_stack_get_base).apply(null,arguments)};var tt=a._emscripten_stack_get_end=function(){return(tt=a._emscripten_stack_get_end=a.asm.emscripten_stack_get_end).apply(null,arguments)},nr=a.stackSave=J("stackSave"),rr=a.stackRestore=J("stackRestore"),Wt=a.stackAlloc=J("stackAlloc");a.dynCall_jiji=J("dynCall_jiji");r("intArrayFromString",!1);r("intArrayToString",!1);a.ccall=At;a.cwrap=kn;r("setValue",!1);a.getValue=Sn;r("allocate",!1);r("UTF8ArrayToString",!1);r("UTF8ToString",!1);r("stringToUTF8Array",!1);r("stringToUTF8",!1);r("lengthBytesUTF8",!1);r("stackTrace",!1);r("addOnPreRun",!1);r("addOnInit",!1);r("addOnPreMain",!1);r("addOnExit",!1);r("addOnPostRun",!1);r("writeStringToMemory",!1);r("writeArrayToMemory",!1);r("writeAsciiToMemory",!1);r("addRunDependency",!0);r("removeRunDependency",!0);r("FS_createFolder",!1);r("FS_createPath",!0);r("FS_createDataFile",!0);r("FS_createPreloadedFile",!0);r("FS_createLazyFile",!0);r("FS_createLink",!1);r("FS_createDevice",!0);r("FS_unlink",!0);r("getLEB",!1);r("getFunctionTables",!1);r("alignFunctionTables",!1);r("registerFunctions",!1);r("addFunction",!1);r("removeFunction",!1);r("getFuncWrapper",!1);r("prettyPrint",!1);r("dynCall",!1);r("getCompilerSetting",!1);r("print",!1);r("printErr",!1);r("getTempRet0",!1);r("setTempRet0",!1);r("callMain",!1);r("abort",!1);r("keepRuntimeAlive",!1);r("zeroMemory",!1);r("stringToNewUTF8",!1);r("abortOnCannotGrowMemory",!1);r("emscripten_realloc_buffer",!1);r("ENV",!1);r("withStackSave",!1);r("ERRNO_CODES",!1);r("ERRNO_MESSAGES",!1);r("setErrNo",!1);r("inetPton4",!1);r("inetNtop4",!1);r("inetPton6",!1);r("inetNtop6",!1);r("readSockaddr",!1);r("writeSockaddr",!1);r("DNS",!1);r("getHostByName",!1);r("Protocols",!1);r("Sockets",!1);r("getRandomDevice",!1);r("traverseStack",!1);r("convertFrameToPC",!1);r("UNWIND_CACHE",!1);r("saveInUnwindCache",!1);r("convertPCtoSourceLocation",!1);r("readAsmConstArgsArray",!1);r("readAsmConstArgs",!1);r("mainThreadEM_ASM",!1);r("jstoi_q",!1);r("jstoi_s",!1);r("getExecutableName",!1);r("listenOnce",!1);r("autoResumeAudioContext",!1);r("dynCallLegacy",!1);r("getDynCaller",!1);r("dynCall",!1);r("callRuntimeCallbacks",!1);r("wasmTableMirror",!1);r("setWasmTableEntry",!1);r("getWasmTableEntry",!1);r("handleException",!1);r("runtimeKeepalivePush",!1);r("runtimeKeepalivePop",!1);r("callUserCallback",!1);r("maybeExit",!1);r("safeSetTimeout",!1);r("asmjsMangle",!1);r("asyncLoad",!1);r("alignMemory",!1);r("mmapAlloc",!1);r("reallyNegative",!1);r("unSign",!1);r("reSign",!1);r("formatString",!1);r("PATH",!1);r("PATH_FS",!1);r("SYSCALLS",!1);r("getSocketFromFD",!1);r("getSocketAddress",!1);r("JSEvents",!1);r("registerKeyEventCallback",!1);r("specialHTMLTargets",!1);r("maybeCStringToJsString",!1);r("findEventTarget",!1);r("findCanvasEventTarget",!1);r("getBoundingClientRect",!1);r("fillMouseEventData",!1);r("registerMouseEventCallback",!1);r("registerWheelEventCallback",!1);r("registerUiEventCallback",!1);r("registerFocusEventCallback",!1);r("fillDeviceOrientationEventData",!1);r("registerDeviceOrientationEventCallback",!1);r("fillDeviceMotionEventData",!1);r("registerDeviceMotionEventCallback",!1);r("screenOrientation",!1);r("fillOrientationChangeEventData",!1);r("registerOrientationChangeEventCallback",!1);r("fillFullscreenChangeEventData",!1);r("registerFullscreenChangeEventCallback",!1);r("registerRestoreOldStyle",!1);r("hideEverythingExceptGivenElement",!1);r("restoreHiddenElements",!1);r("setLetterbox",!1);r("currentFullscreenStrategy",!1);r("restoreOldWindowedStyle",!1);r("softFullscreenResizeWebGLRenderTarget",!1);r("doRequestFullscreen",!1);r("fillPointerlockChangeEventData",!1);r("registerPointerlockChangeEventCallback",!1);r("registerPointerlockErrorEventCallback",!1);r("requestPointerLock",!1);r("fillVisibilityChangeEventData",!1);r("registerVisibilityChangeEventCallback",!1);r("registerTouchEventCallback",!1);r("fillGamepadEventData",!1);r("registerGamepadEventCallback",!1);r("registerBeforeUnloadEventCallback",!1);r("fillBatteryEventData",!1);r("battery",!1);r("registerBatteryEventCallback",!1);r("setCanvasElementSize",!1);r("getCanvasElementSize",!1);r("demangle",!1);r("demangleAll",!1);r("jsStackTrace",!1);r("stackTrace",!1);r("getEnvStrings",!1);r("checkWasiClock",!1);r("flush_NO_FILESYSTEM",!1);r("writeI53ToI64",!1);r("writeI53ToI64Clamped",!1);r("writeI53ToI64Signaling",!1);r("writeI53ToU64Clamped",!1);r("writeI53ToU64Signaling",!1);r("readI53FromI64",!1);r("readI53FromU64",!1);r("convertI32PairToI53",!1);r("convertU32PairToI53",!1);r("setImmediateWrapped",!1);r("clearImmediateWrapped",!1);r("polyfillSetImmediate",!1);r("uncaughtExceptionCount",!1);r("exceptionLast",!1);r("exceptionCaught",!1);r("ExceptionInfo",!1);r("CatchInfo",!1);r("exception_addRef",!1);r("exception_decRef",!1);r("Browser",!1);r("funcWrappers",!1);r("getFuncWrapper",!1);r("setMainLoop",!1);r("wget",!1);r("FS",!1);r("MEMFS",!1);r("TTY",!1);r("PIPEFS",!1);r("SOCKFS",!1);r("_setNetworkCallback",!1);r("tempFixedLengthArray",!1);r("miniTempWebGLFloatBuffers",!1);r("heapObjectForWebGLType",!1);r("heapAccessShiftForWebGLHeap",!1);r("GL",!1);r("emscriptenWebGLGet",!1);r("computeUnpackAlignedImageSize",!1);r("emscriptenWebGLGetTexPixelData",!1);r("emscriptenWebGLGetUniform",!1);r("webglGetUniformLocation",!1);r("webglPrepareUniformLocationsBeforeFirstUse",!1);r("webglGetLeftBracePos",!1);r("emscriptenWebGLGetVertexAttrib",!1);r("writeGLArray",!1);r("AL",!1);r("SDL_unicode",!1);r("SDL_ttfContext",!1);r("SDL_audio",!1);r("SDL",!1);r("SDL_gfx",!1);r("GLUT",!1);r("EGL",!1);r("GLFW_Window",!1);r("GLFW",!1);r("GLEW",!1);r("IDBStore",!1);r("runAndAbortIfError",!1);r("warnOnce",!1);r("stackSave",!1);r("stackRestore",!1);r("stackAlloc",!1);r("AsciiToString",!1);r("stringToAscii",!1);r("UTF16ToString",!1);r("stringToUTF16",!1);r("lengthBytesUTF16",!1);r("UTF32ToString",!1);r("stringToUTF32",!1);r("lengthBytesUTF32",!1);r("allocateUTF8",!1);r("allocateUTF8OnStack",!1);a.writeStackCookie=Nt;a.checkStackCookie=ge;Et("ALLOC_NORMAL",!1);Et("ALLOC_STACK",!1);var De;function nt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}be=function t(){De||rt(),De||(be=t)};function ir(){Ut(),Nt()}function rt(t){if(re>0||(ir(),Fn(),re>0))return;function e(){De||(De=!0,a.calledRun=!0,!pe&&(Rn(),a.onRuntimeInitialized&&a.onRuntimeInitialized(),p(!a._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),Ln()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),e()},1)):e(),ge()}a.run=rt;function ar(){var t=Me,e=F,n=!1;Me=F=s=>{n=!0};try{var i=Jn;i&&i()}catch{}Me=t,F=e,n&&(te("stdio streams had content in them that was not flushed. you should set EXIT_RUNTIME to 1 (see the FAQ), or make sure to emit a newline when you printf etc."),te("(this may also be due to not including full filesystem support - try building with -s FORCE_FILESYSTEM=1)"))}function sr(t,e){if(ar(),Qe()){if(!e){var n="program exited (with status: "+t+"), but EXIT_RUNTIME is not set, so halting execution but not exiting the runtime or preventing further async execution (build with EXIT_RUNTIME=1, if you want a true shutdown)";F(n)}}else On();or(t)}function or(t){Qe()||(a.onExit&&a.onExit(t),pe=!0),Te(t,new nt(t))}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();rt();const lr=t=>{const e=t.length,n=a.cwrap("secondaryStructureFromDotBraket","number",["string"]);let i=-1;try{i=n(t)}catch(s){throw new Error(`Error encountered while processing secondary structure: ${s}`)}if(i!=-1){const s=4,c=[];let o=0;for(;o<e*2;){const l=a.getValue(i+o*s,"float");o++;const d=a.getValue(i+o*s,"float");o++;const g=[l,d];c.push(g)}return c}return[]};var ae;(function(t){t.Residue="residue",t.InteractionsNumber="interactions_number",t.InteractionResidue="interaction_residue"})(ae||(ae={}));var Q;(function(t){t.Pair="pair",t.Backbone="backbone",t.Interaction="interaction"})(Q||(Q={}));const Fe={size:10,y:4},cr=100,_e=9;function dr({nodes:t,links:e,svgRef:n,dispatch:i,setHoverResidueHash:s},c){let{nodeId:o=u=>u.id,nodeGroups:l,nodeTitle:d,nodeFill:g=u=>u.color!==void 0?u.color:"currentColor",nodeStroke:S="#fff",nodeStrokeWidth:_=1.5,nodeStrokeOpacity:T=1,linkStroke:P=u=>u.color!==void 0?u.color:"#444",linkStrokeOpacity:k=.6,linkStrokeWidth:D=1.5,linkStrokeLinecap:b="round",width:y=640,height:v=400,invalidation:h}=c;const R=t,M=e,w=ut(t,o).map(Jt);d===void 0&&(d=(u,C)=>w[C]);const O=typeof D!="function"?null:ut(e,D);t=R.map(u=>(u.initial_x&&u.initial_y&&(u.fx=u.initial_x,u.fy=u.initial_y),u)),e=M;const Z=cn(),B=an(e).id(({index:u})=>w[u]).distance((u,C)=>{switch(M[C].linkType){case Q.Backbone:return 4;case Q.Interaction:return 10;default:return 30}}).strength((u,C)=>{switch(M[C].linkType){case Q.Backbone:return 1.8;case Q.Interaction:return 1.5;default:return 1.2}}),W=()=>{G.attr("x1",u=>u.source.x).attr("y1",u=>u.source.y).attr("x2",u=>u.target.x).attr("y2",u=>u.target.y),j.attr("transform",u=>`translate(${u.x}, ${u.y})`)},ee=sn(t).force("link",B).force("nodes",Z).on("tick",W),H=Be(n).attr("width",y).attr("height",v).attr("viewBox",[-y/2,-v/2,y,v]).attr("style","max-width: 100%; height: auto; height: intrinsic;");H.html("");const oe=H.append("g"),G=oe.append("g").attr("stroke-opacity",k).attr("stroke-width",typeof D!="function"?D:null).attr("stroke-linecap",b).selectAll("line").data(e).join("line").attr("stroke-dasharray",u=>u.linkType==="pair"?"4":null).attr("stroke",P),j=oe.append("g").selectAll("g").data(t).enter().append("g").call(Qt(ee)),Oe=j.append("circle").attr("stroke",S).attr("stroke-opacity",T).attr("stroke-width",_).attr("fill",g).style("cursor","pointer").attr("r",_e);let st=new Date;j.on("click",function(u,C){C.type&&[ae.InteractionsNumber,ae.Residue].indexOf(C.type)!==-1&&(i({type:"selectedResidueHash",payload:C.hash}),console.log("Clicked interaction bubble"))}).on("mouseover",function(u,C){Be(this).select("circle").attr("r",ot(_e*2)),s(C.hash),new Date().getTime()-st.getTime()>cr&&(st=new Date)}).on("mouseout",function(u,C){Be(this).select("circle").attr("r",ot(_e)),s(void 0)});const $t=j.append("text").text(u=>u.name).attr("text-anchor","middle").attr("font-size",Fe.size).attr("y",Fe.y).attr("class",u=>{const C=["svg-graph-text"];return u.type===ae.InteractionsNumber?C.push("svg-graph-text-black"):C.push("svg-graph-text-white"),C.join(" ")});O&&G.attr("stroke-width",u=>O[u.index]),h!=null&&h.then(()=>ee.stop());function Jt(u){return u!==null&&typeof u=="object"?u.valueOf():u}function Qt(u){function C(Y){Y.active||u.alphaTarget(.3).restart(),Y.subject.fx=Y.subject.x,Y.subject.fy=Y.subject.y}function Le(Y){Y.subject.fx=Y.x,Y.subject.fy=Y.y}function ve(Y){Y.active||u.alphaTarget(0)}return on().on("start",C).on("drag",Le).on("end",ve)}const ot=u=>$?u/$:u;let $=1,[lt,ct]=[0,0];const dt=5,Zt=ln().scaleExtent([.001,100]).on("zoom",({transform:u})=>{const C=Math.abs(u.x-lt),Le=Math.abs(u.y-ct);(C>dt||Le>dt)&&(lt=u.x,ct=u.y,oe.attr("transform",u));const ve=Math.sqrt(u.k);Math.abs(ve-$)>.1&&($=ve,oe.style("stroke-width",3/$),Oe.attr("r",_e/$).attr("stroke-width",_/$),$t.attr("font-size",Fe.size/$).attr("y",Fe.y/$))});return H.call(Zt),Object.assign(H.node(),{scales:{color:null}})}const fr=async t=>(await fetch("http://localhost:8001",{body:t.originalText,mode:"cors",method:"POST"})).json(),ur=t=>{if(t.dotBraket&&t.dotBraket.length>0){const e=lr(t.dotBraket);return{chain_id:t.chainIdentifier,coords:e}}};let we=0;const hr=()=>we=0,mr=t=>{const e=ur(t);if(!!e&&[L.RNA,L.DNA].indexOf(t.kind)!=-1){let n=0;const i=dn(e.coords.map(c=>c[0])),s=we!=0?we-i+_e*3:0;for(let c=0;c<Math.min(t.residues.length,e.coords.length);c++){const[o,l]=e.coords[c],d=o+s;n=Math.max(n,d),t.residues[c].initial_x=d,t.residues[c].initial_y=l}we=Math.max(we,n)}};class pr{constructor(e){N(this,"nucleicAcids",[]);N(this,"proteins",[]);N(this,"hasValidDNA",!1);N(this,"hasValidRNA",!1);N(this,"residues",new Map);N(this,"visualization",{chain1:null,chain2:null});this.polymers=e,this.prepareObjects()}generateWatsonCrickPairs(e,n,i=!1){let s=this.calculateWatsonCrickPairs(e,n),c=this.calculateWatsonCrickPairs(n,e);c.reverse();let o=s;return c.forEach(l=>{if(l.length===1)o.push(l);else if(l.length===2)for(let d=0;d<s.length;d++){let g=s[d];if(g.length===2&&g[0].hash===l[1].hash&&g[1].hash===l[0].hash)break}}),o}watsonCrickPairs(){if(this.nucleicAcids.length<=0)throw Error("No nucleic acids are present in given PDB structure");const e=[];for(let n=0;n<this.nucleicAcids.length;n++){for(let s=n+1;s<this.nucleicAcids.length;s++){const c=this.generateWatsonCrickPairs(this.nucleicAcids[n],this.nucleicAcids[s]);e.push(...c)}const i=this.generateWatsonCrickPairs(this.nucleicAcids[n],this.nucleicAcids[n]);i.length>0&&e.push(...i)}return e}calculateWatsonCrickPairs(e,n){const i=[];return e.residues.forEach(s=>{let c=1/0,o;n.residues.forEach(l=>{let d=1/0,g=[1/0],S=[1/0];const _=s.findAtomsByNames(["C2","C4","C6"]);_.length==3&&(g=[Math.abs(_[0].coords.toVec().subtract(l.o).dot(l.v)),Math.abs(_[1].coords.toVec().subtract(l.o).dot(l.v)),Math.abs(_[2].coords.toVec().subtract(l.o).dot(l.v))]);const T=l.findAtomsByNames(["C2","C4","C6"]);T.length==3&&(S=[Math.abs(T[0].coords.toVec().subtract(s.o).dot(s.v)),Math.abs(T[1].coords.toVec().subtract(s.o).dot(s.v)),Math.abs(T[2].coords.toVec().subtract(s.o).dot(s.v))]),d=Math.max(...S,...g),d<c&&s.hash!==l.hash&&(c=d,o=l)}),o!==void 0&&c<=xn+Math.random()&&_n(o,s)&&s.center.toVec().distanceTo(o.center.toVec())<15?(e===n&&(s.watsonCrickPairResidueIndex=o.indexInPolymer,o.watsonCrickPairResidueIndex=s.indexInPolymer),i.push([s,o])):i.push([s])}),i}prepareObjects(){this.nucleicAcids=this.findNucleicAcids(),this.proteins=this.findProteins(),this.nucleicAcids.forEach(e=>{yt(e),this.populateResiduesMap(e)}),this.proteins.forEach(e=>{yt(e),this.populateResiduesMap(e)})}findProteins(){return this.polymers.filter(e=>[L.Protein].indexOf(e.kind)!==-1)}findNucleicAcids(){return this.polymers.filter(e=>[L.DNA,L.RNA].indexOf(e.kind)!==-1)}populateResiduesMap(e){e.residues.forEach(n=>this.residues.set(n.hash,n))}findResidueByHash(e){return this.residues.get(e)}fillInSecondaryStructure(){this.nucleicAcids.forEach(e=>{mr(e)})}simpleInteractions(){const e=4,n=10;this.nucleicAcids.forEach(i=>{i.residues.forEach(s=>{this.proteins.forEach(c=>{c.residues.forEach(o=>{let l=o.findAtomsByNames(["CA"]);if(l.length>0){const d=l[0];s.center.toVec().distanceTo(d.coords.toVec())<=n&&s.atoms.forEach(S=>{o.atoms.forEach(_=>{const T=S.coords.toVec().distanceTo(_.coords.toVec());if(T<=e){const P={residueAtom:S,distance:T,polymerKind:L.Protein,type:He.Threshold,polymerChainIdentifier:o.polymerChainIdentifier,residueHash:o.hash,atom:_};s.interactions.push(P)}})})}})})})})}}const se=t=>`${t.polymerChainIdentifier}:${t.name}${t.sequenceNumber}`,Gt={[A.DA]:"#fcb331",[A.DT]:"#5670fb",[A.DG]:"#f63c37",[A.DC]:"#03c907",[A.CM]:"#03c907",[I.A]:"#acb331",[I.U]:"#a670fb",[I.G]:"#a63c37",[I.C]:"#a3c907",[I.I]:"#a3c907",interaction:"#fbf8cc"},Re="red",fe="blue",Ht={[A.DA]:Re,[A.DT]:Re,[A.DG]:fe,[A.DC]:fe,[A.CM]:fe,[I.A]:Re,[I.U]:Re,[I.G]:fe,[I.C]:fe,[I.I]:fe,interaction:"#bbb"},yr="#494949";function gr(){const[t,e]=E.exports.useContext(ue),n=t.polymers,i=Ue.createRef(),s=Ue.createRef(),c=E.exports.useRef(null),o=E.exports.useMemo(()=>{if(n.length>0){const _=new pr(n);return window.iFinder=_,_}},[n]);E.exports.useEffect(()=>{e({payload:o,type:"iFinderInstance"})},[o]);const[l,d]=E.exports.useState(),g=E.exports.useMemo(()=>l?t.getResidueByHashOnly(l):null,[l]);function S(){if(!i||n.length<=0||!o)return;console.time("Nucleic_acid_VIZ");let _;try{_=o.watsonCrickPairs()}catch(y){console.log(y),e({type:"error",payload:y.toString()});return}o.fillInSecondaryStructure(),o.nucleicAcids,o.simpleInteractions();const T=[],P=[],k=y=>{const v=Object.values(A);y.residues.forEach((h,R)=>{T.push({hash:h.hash,name:h.name.toString().slice(-1),id:se(h),color:Gt[h.name],group:v.indexOf(h.name)+1,type:ae.Residue,initial_x:h.initial_x,initial_y:h.initial_y});const M=y.residues;if(R>0&&R<M.length&&P.push({source:se(M[R-1]),target:se(h),value:1,color:yr,linkType:Q.Backbone}),h.interactions.length>0){const w=se(h)+"-interactions";T.push({hash:h.hash,name:h.interactions.length.toString(),id:w,color:Gt.interaction,group:5,type:ae.InteractionsNumber}),P.push({source:w,target:se(h),value:1,color:Ht.interaction,linkType:Q.Interaction})}})};o.nucleicAcids.forEach(y=>k(y)),_.forEach(y=>{const v=y[0];if(y.length===2){const h=y[1];P.push({source:se(h),target:se(v),value:1,color:Ht[v.name],linkType:Q.Pair})}});const[D,b]=[c.current.offsetWidth,c.current.offsetHeight];dr({nodes:T,links:P,svgRef:i.current,dispatch:e,setHoverResidueHash:d},{width:D,height:b}),console.timeEnd("Nucleic_acid_VIZ")}return E.exports.useEffect(S,[n]),m(We,{children:[f("div",{children:t.simpleStuffy}),m("div",{className:"flex flex-col items-center h-full p-5",ref:c,children:[m("div",{className:"relative h-full min-w-full",children:[f("svg",{ref:i}),g&&m("div",{className:"absolute bottom-0 p-4 text-sm text-gray-800 bg-white/50 right-4 rounded-xl",children:["Chain ",g.polymerChainIdentifier,f("br",{})," Residue ",g.name,"-",g.sequenceNumber]})]}),f("div",{ref:s,style:{position:"absolute",opacity:0,background:"#fff"}})]})]})}const jt=new Set,it=()=>{const t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16));return jt.has(t)?it():(jt.add(t),t)};class Yt{constructor(e){N(this,"file");e!==void 0&&(this.file=e)}async readData(){if(this.file==null)throw Error("file not provided");const e=await this.file.text();return this.format(e)}format(e){return{originalText:e,raw:this.formatText(e),polymers:this.formatPolymers(e)}}formatText(e){return e.split(`
`).map((n,i)=>i.toString()+". "+n).join(`
`)}formatPolymers(e){let n=[];const i=()=>({chainIdentifier:"",residues:[],kind:L.Unknown}),s=()=>new mn(o.residues.length),c=()=>{l.hash=it(),o.residues.push(l)};let o=i(),l=s();const d=v=>{let h={[L.DNA]:0,[L.RNA]:0,[L.Protein]:0};return v===void 0?h:[h,Object.keys(v).reduce((R,M)=>v[R]>v[M]?R:M)]};let g=d();const S=[];let _={chains:[],rotations:[],translations:[x.infinity()]},T=!1;const P=()=>{_={chains:[],rotations:[],translations:[x.infinity()]}};let k=!1,D=0,b=0;const y=e.split(`
`);for(let v=0;v<y.length;v++){const h=y[v];if(!(k&&b>1)){if(h.startsWith("NUMMDL")&&(k=!0,D=parseInt(h.slice(10,14).trim()),console.log("NUMBER OF MODELS:",D)),h.startsWith("MODEL")&&(b=parseInt(h.slice(11,14).trim())),h.startsWith("ATOM")||h.startsWith("HETATM")){const R=parseFloat(h.slice(30,38).trim()),M=parseFloat(h.slice(38,46).trim()),w=parseFloat(h.slice(46,54).trim()),O=h.slice(12,16).trim(),Z=h.slice(17,20).trim(),B=h.slice(76,78).trim(),W=parseInt(h.slice(22,26).trim()),ee=h.slice(21,22);o.chainIdentifier=ee;const H={coords:new Ae(R,M,w),name:O,element:B,residueName:Z,residueSequenceNumber:W};g[pn(H)]++,l.sequenceNumber===-1&&(l.name=H.residueName,l.sequenceNumber=W,l.polymerChainIdentifier=ee),W!==l.sequenceNumber&&(c(),l=s(),l.name=H.residueName,l.sequenceNumber=W,l.polymerChainIdentifier=ee),l.atoms.push(H)}if(h.startsWith("TER")||v===y.length-1){c();const[R,M]=d(g);g=R,o.kind=M,o=gt(o),n.push(o),o=i(),l=s()}if(h.startsWith("REMARK 350")){if(T=!0,["REMARK 350 APPLY THE FOLLOWING TO CHAINS: ","REMARK 350                    AND CHAINS:"].forEach((M,w)=>{if(h.startsWith(M)){let O=h.trim().slice(M.length-1,h.length).toString().replaceAll(" ","").split(",");w===0&&(P(),_.chains.length>0&&S.push(_)),O.length>0&&_.chains.push(...O)}}),h.startsWith("REMARK 350   BIOMT")){let w=h.replace("REMARK 350   BIOMT","").match(new RegExp(/(\d{1})\s*(\d{1})\s*([+-]?[0-9]*[.]?[0-9]+)\s*([+-]?[0-9]*[.]?[0-9]+)\s*([+-]?[0-9]*[.]?[0-9]+)\s*([+-]?[0-9]*[.]?[0-9]+)/));if(w!=null&&w.length===6+1){w=w.slice(1);let O=parseInt(w[1])-1,Z=parseInt(w[0])-1,B=[parseFloat(w[2]),parseFloat(w[3]),parseFloat(w[4])],W=parseFloat(w[5]);typeof _.translations[O]=="undefined"&&(_.translations[O]=x.infinity()),_.translations[O].setIndex(Z,W),Array.isArray(_.rotations[O])||(_.rotations[O]=[]),_.rotations[O][Z]=B}}}else T&&(S.push(_),P()),T=!1}}return S.forEach(v=>{const h=n.filter(w=>v.chains.indexOf(w.chainIdentifier)!==-1),R=v.rotations.slice(1),M=v.translations.slice(1);R.forEach((w,O)=>{h.forEach(Z=>{let B=fn(Z,{includeNonEnumerable:!0});B.chainIdentifier=B.chainIdentifier+(O+1).toString(),B.generatedFromTransform=!0,B.residues.forEach((W,ee)=>{W.polymerChainIdentifier=B.chainIdentifier,W.atoms.forEach((H,oe)=>{let G=H.coords.toVec(),j=x.infinity();console.log("Coorinates before:",G),j.x=G.x*w[0][0]+G.y*w[0][1]+G.z*w[0][2],j.y=G.x*w[1][0]+G.y*w[1][1]+G.z*w[1][2],j.z=G.x*w[2][0]+G.y*w[2][1]+G.z*w[2][2];const Oe=M[O];j=j.add(Oe),console.log("Coords after:",j),console.log("Distance between atoms: ",j.distanceTo(G)),H.coords=j.toCoord(),W.atoms[oe]=H}),W.hash=it(),B.residues[ee]=W}),B=gt(B),n.push(B)})})}),console.log("Transformations:",S),console.log("Result after translation",n),n}}const br=async t=>await(await fetch(`https://files.rcsb.org/download/${t}.pdb`)).text();function xr(){var D;const[t,e]=E.exports.useContext(ue),[n,i]=E.exports.useContext(Se),s=()=>{e({type:"isLoading",payload:!0})},c=()=>{e({type:"isLoading",payload:!1})},o=b=>{e({type:"pdb",payload:b})},l=b=>{e({type:"currentPDBId",payload:b})},d=b=>{e({type:"polymers",payload:b})},g=()=>{e({type:"resetState",payload:null})},S=async b=>{g(),s();const y=new Yt().format(await br(b));o(y),l(b)};E.exports.useEffect(()=>{const y=new URLSearchParams(window.location.search).get("id");console.log("ID",y),y!==null&&S(y)},[]);const _=async b=>{var v;const y=(v=b.target.files)==null?void 0:v.item(0);if(y!==null){g(),s(),console.time("TIME_TO_PARSE_EVERYTHING"),console.time("TIME_TO_PARSE_PDB");const h=await new Yt(y).readData();console.timeEnd("TIME_TO_PARSE_PDB"),o(h),l(y.name),console.timeEnd("TIME_TO_PARSE_EVERYTHING")}};let T;t.polymers.length>0&&(T=m("div",{className:"mt-5",children:[f("div",{className:"mb-1",children:"Provided input file"}),f("textarea",{className:"w-full text-sm border border-blue-100 h-96",value:(D=t.pdb)==null?void 0:D.raw,readOnly:!0})]}));const P=E.exports.useRef(null),k=()=>{var y;const b=(y=P.current)==null?void 0:y.value;b&&S(b.toString().trim())};return E.exports.useEffect(()=>{hr(),(async()=>{if(t.pdb){let b;try{n.currentlySelectedSamplePDBID?b=n.sampleStructures.get(n.currentlySelectedSamplePDBID).chains:b=await fr(t.pdb)}catch(y){e({type:"error",payload:y})}b&&(e({payload:b,type:"secondaryStructures"}),t.pdb.polymers.forEach(y=>{b==null||b.forEach(v=>{v.chain_id===y.chainIdentifier&&(y.dotBraket=v.dot_braket)})})),d(t.pdb.polymers),c(),i({type:"currentlySelectedSamplePDBID",payload:void 0})}})()},[t.pdb]),E.exports.useEffect(()=>{n.currentlySelectedSamplePDBID&&S(n.currentlySelectedSamplePDBID)},[n.currentlySelectedSamplePDBID]),m("div",{className:"max-h-screen p-5 overflow-auto break-words",children:[!t.isLoading&&m("div",{children:[t.error.length>0&&f("div",{className:"mb-4",children:m("div",{className:"text-lg font-bold text-red-700",children:["Something went wrong: ",t.error]})}),t.pdb===void 0&&f("div",{className:"p-2 mb-4 text-sm text-gray-600 bg-red-200",children:"Choose a PDB file which contains DNA/RNA with Proteins"}),m("div",{children:[t.currentPDBId.length>0&&m("div",{className:"mb-4",children:["Currently selected PDB ID:",f("b",{children:t.currentPDBId.toUpperCase()})]}),m("div",{className:"mb-4",children:[m("div",{className:"mb-2 font-bold text-gray-600 text-normal",children:["Enter PDB file ID:",m("div",{className:"text-xs font-normal",children:["PDB file should contain ",f("b",{children:"DNA/RNA"})," structures"]})]}),m("div",{className:"flex flex-row max-w-full",children:[f("input",{onKeyPress:b=>{b.key==="Enter"&&k()},ref:P,placeholder:"1ZS4",className:"block px-2 py-1 transition-all border border-r-0 border-indigo-300 rounded rounded-tr-none rounded-br-none outline-none ring-indigo-200 focus:ring-2 outline-0"}),f("button",{onClick:k,className:"bg-indigo-400 border-l-0 text-white font-bold text-sm ring-indigo-200 focus:ring-2 hover:bg-indigo-600 transition-all w-[100px]  block rounded rounded-tl-none rounded-bl-none border border-indigo-300",children:"GO"})]})]}),m("div",{className:"mb-2 font-bold text-gray-600 text-normal",children:["Or choose a PDB id/file/sample to display:",m("div",{className:"text-xs font-normal",children:["PDB file should contain ",f("b",{children:"DNA/RNA"})," structures"]})]}),f("input",{type:"file",onChange:_,className:"max-w-full"}),m("div",{className:"flex flex-row gap-1 mt-6 font-bold",children:[f("div",{className:"text-gray-600 text-normal",children:"Or choose"}),f("div",{className:"text-indigo-600 cursor-pointer text-normal hover:underline hover:text-indigo-800",onClick:()=>i({type:"showSamplesModal",payload:!0}),children:"one of pre-defined samples"})]}),f("div",{className:"text-xs font-normal",children:"Which will also contain secondary structures, if you can't run secondary structure generator script."})]})]}),T,t.pdb&&m("div",{children:["Polymers from input:",t.polymers.map(({residues:b,chainIdentifier:y,kind:v},h)=>m("div",{className:"ml-2",children:["Chain:"," ",m("b",{children:[y," (",v,")"]}),f("div",{className:"ml-2",children:b.map((R,M)=>m("span",{children:[R.name," \xA0"]},M))})]},h))]})]})}const qt=({text:t})=>m("div",{className:"flex flex-col items-center gap-1",children:[f("div",{className:"font-bold text-white",children:t!=null?t:"Loading"}),m("div",{className:"lds-roller",children:[f("div",{}),f("div",{}),f("div",{}),f("div",{}),f("div",{}),f("div",{}),f("div",{}),f("div",{})]})]}),Vt=({children:t,show:e,setShow:n})=>{const i=E.exports.useRef(null),s=()=>n(!1);return f(We,{children:e&&f("div",{children:m("div",{className:"fixed top-0 left-0 z-[999]",children:[f("div",{className:"absolute top-0 left-0 z-10 w-screen h-screen bg-gray-800/50",onClick:s}),f("div",{ref:i,className:"absolute z-[1000] w-screen flex h-screen justify-center items-center",onClick:c=>{i.current===c.target&&s()},children:m("div",{className:"p-12 bg-white rounded-xl max-w-7xl max-h-[80%] overflow-auto relative shadow-xl border-gray-100 border",children:[f("div",{className:"absolute text-2xl font-bold text-gray-400 cursor-pointer hover:text-gray-800 right-4 top-4",onClick:s,children:"\u2715"}),t]})})]})})})},_r=({residue:t})=>{const[e,n]=E.exports.useContext(ue),i=e.getPolymer(t.polymerChainIdentifier),s=E.exports.useMemo(()=>{const d=t.watsonCrickPairResidueIndex;if(d>0&&i)return i.residues[d]},[t]),c=d=>{n({type:"selectedResidueHash",payload:d.hash})},[o,l]=E.exports.useState(!0);return E.exports.useEffect(()=>{o||n({type:"selectedResidueHash",payload:void 0})},[o]),f(Vt,{show:o,setShow:l,children:m("div",{className:"flex flex-col items-start justify-center gap-2",children:[f("div",{className:"text-2xl font-bold",children:"Residue information"}),m("div",{className:"flex flex-col gap-1",children:[m("div",{children:["Polymer chain name \xA0",m("b",{children:[t.polymerChainIdentifier," (",i==null?void 0:i.kind,")"]})]}),m("div",{children:["Residue type ",f("b",{children:t.name})]}),m("div",{children:["Residue sequence number ",f("b",{children:t.sequenceNumber})]}),m("div",{children:["Number of interactions ",f("b",{children:t.interactions.length})]}),s&&m("div",{children:["Intramolecular Watson-Crick pair:"," ",m("b",{className:"cursor-pointer hover:underline hover:text-indigo-800",onClick:()=>c(s),children:[s.name,"-",s.sequenceNumber]})]})]}),f("div",{className:"mt-8 text-2xl font-bold",children:"Interactions"}),f("div",{className:"max-w-full overflow-auto",children:m("table",{className:"border border-collapse border-gray-300",children:[f("thead",{children:m("tr",{children:[f("th",{className:"p-2 font-bold text-center border border-gray-300",children:"Interaction type"}),f("th",{className:"p-2 font-bold text-center border border-gray-300",children:"Distance between interacting atoms (\xC5)"}),f("th",{className:"p-2 font-bold text-center border border-gray-300",children:"Polymer chain name"}),f("th",{className:"p-2 font-bold text-center border border-gray-300",children:"Residue name"}),f("th",{className:"p-2 font-bold text-center border border-gray-300",children:"Atom"}),f("th",{className:"p-2 font-bold text-center border border-gray-300",children:"Interacting atom (of this residue)"})]})}),f("tbody",{children:t.interactions.map((d,g)=>m("tr",{className:"odd:bg-gray-100",children:[m("td",{className:"p-1 border border-gray-300",children:[d.type," - ",d.polymerKind]}),f("td",{className:"p-1 text-center border border-gray-300",children:Math.round(d.distance*1e3)/1e3}),f("td",{className:"p-1 text-center border border-gray-300",children:d.polymerChainIdentifier}),m("td",{className:"p-1 text-center border border-gray-300",children:[d.atom.residueName,"-",d.atom.residueSequenceNumber]}),m("td",{className:"p-1 text-center border border-gray-300",children:[d.atom.name," (",d.atom.element,")"]}),m("td",{className:"p-1 text-center border border-gray-300",children:[d.residueAtom.name," (",d.residueAtom.element,")"]})]},g))})]})})]})})};var Kt={"6XRZ":[{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."},{chain_id:"A",dot_braket:"..((......)).....(((((((((.((.....))))))))))).(((((((((.........))).)))))).............."}],"7LYJ":[{chain_id:"A",dot_braket:"(((((((((..........)))))))))((((((((((((....))))).)))))))........."}],"7MKY":[{chain_id:"A",dot_braket:"(((((((((..........)))))))))((((((((((((....))))).)))))))........."}],"7ACT":[{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."},{chain_id:"B",dot_braket:".........."}],"3Q1Q":[{chain_id:"B",dot_braket:"((((((((((..(((((..((((((((((....))))).))))).............((((......((((((((((.....)))))(((((....)))))((...(((((.............(((((((((((....)))))))))..)).......((((((.......))))))..(((((((....)))))))....)))..)))))))))))))...((((.....((((...(((........)))....)))).....))))......((((((((....))))))))...........))))).....................))))))))))...."},{chain_id:"C",dot_braket:"(((((((..((((........)))).((((((..(((....)))...)))))).....(((((.......))))))))))))...."}],"5B2R":[{chain_id:"A",dot_braket:"....................((((((..((((....))))....))))))..((.....)).......((((....))))."}],"6C0F":[{chain_id:"1",dot_braket:"...........................((((......))))...........((....))...((((......((.....)).....))))...(((...........((.((((((...)))))).)).............(((((((.((((((((((((((((((((.....((((......)))).........(((.......)))....))))))))..))))))))....)))))))))))........(((((((...))))))).....(((((........)))))..)))..................................((....))...............((((....))))..................................(((((.((((((.....((((...((((.((.((((((.....)))))).)).....))))...))))..(((((((((((((((((((((((.......(((((((......((((((....)))))).......))))))).....))))).))))))))))........(((....)))....))))))))....)))))).)))))....((((((....((((((.((((((..(((...(((.......)))...))).....(((..(((((....)))))...)))...(((((.((..............))..))).))....)))))).))))))..((..))..((((((.......(((((((...(((........((((((.................)))))).)))...)))))))(((((((((.........)))))))))....))))))..((((((((.((......((((.((((....))))))))...))))))))))........))))))((.....((.......((((....))))))....)).....((((((..(((((..(((((.................)))))..(((((...(((((....((............))...)))))..))))).((((...((((.............))))...)))))))))....))))))..((((((...........((..........((((((.....))))))......)).......((((((...(((((....(((......)))....))))).)))))).............))))))..(((((.....................(((((((((..((....((((....((............))...))))...)).....)))).)))))..)))))."},{chain_id:"2",dot_braket:".........................................((((((........))).......(((......................)))......)))....((.....))(((((((((....)))))))))....................."},{chain_id:"6",dot_braket:"......(((((.....))))).....(((....((((....))))...)))..........((((..))))................"}],"2OM7":[{chain_id:"A",dot_braket:"((((....))))"},{chain_id:"B",dot_braket:"..((())).."},{chain_id:"C",dot_braket:"...((...((((.(((..(((((((((((((.....(((.....((((..))))..)))....)))))))))))))..))).))))....))...."},{chain_id:"D",dot_braket:"(((.......)))"},{chain_id:"F",dot_braket:"(((((((...............)))))))"},{chain_id:"G",dot_braket:"(((((((..(((...((...(((((....)))))...))...))))))))..))"},{chain_id:"H",dot_braket:"(((...((((((...((.......))...))))))....)))"},{chain_id:"I",dot_braket:"((....(((...................))).........................))"},{chain_id:"J",dot_braket:"(((.(((.....(((...........(((((....................)))))..))).....))).)))"},{chain_id:"M",dot_braket:".((((((..((...........)).(((((.......)))))....(((((.......)))))))))))....."}],"1H1K":[{chain_id:"I",dot_braket:"............................................................................................................................................................................................................................................................................................................................................................................................................................"},{chain_id:"J",dot_braket:"...................................................................................................................................................................................................................................................................................."},{chain_id:"K",dot_braket:"........................................................................................................................................................................................................................................................................."},{chain_id:"L",dot_braket:"............................................................................................................................................................................................................................................................................................................................................................................................................................"},{chain_id:"M",dot_braket:"...................................................................................................................................................................................................................................................................................."},{chain_id:"N",dot_braket:"........................................................................................................................................................................................................................................................................."}],"1RY1":[{chain_id:"E",dot_braket:"(((((((((((......)))))))....((((........))))))))."},{chain_id:"A",dot_braket:"((((........(((((......((((..((((((....))))))..))))..............(((((.....((((....(((....)))....))))...))))).))))).........))))"},{chain_id:"M",dot_braket:"..........................."},{chain_id:"N",dot_braket:"..............................."},{chain_id:"O",dot_braket:"........................"},{chain_id:"P",dot_braket:"..................."},{chain_id:"Q",dot_braket:"............"},{chain_id:"R",dot_braket:"............"}],"4GXY":[{chain_id:"A",dot_braket:".....(((.......((..))..........((....(((((.......)))))..((.....)).(((...(((...(((.....((.......(((.((((((.))))))...))).)).....)))......)))....))).....)).)))......"}],"2C4Y":[{chain_id:"R",dot_braket:"((((.((....))))))"},{chain_id:"S",dot_braket:"((.((....))))"}]};const wr=t=>{const e=new Map;Object.keys(Kt).forEach(n=>{e.set(n,{pdbId:n,chains:Kt[n]})}),t({type:"sampleStructures",payload:e})},vr=()=>{const[t,e]=E.exports.useContext(Se),[n,i]=E.exports.useState(!1),s=()=>{e({type:"showSamplesModal",payload:!1})};E.exports.useEffect(()=>{i(t.showSamplesModal)},[t.showSamplesModal]),E.exports.useEffect(()=>{n||s()},[n]);const c=l=>{e({type:"currentlySelectedSamplePDBID",payload:l.pdbId}),s()},o=[];for(const[l,d]of t.sampleStructures.entries())o.push(f("div",{onClick:()=>c(d),className:"font-bold text-indigo-400 cursor-pointer hover:underline hover:text-indigo-700",children:d.pdbId},d.pdbId));return f(Vt,{show:n,setShow:i,children:m("div",{className:"max-w-[600px]",children:[m("div",{className:"mb-6",children:[f("div",{className:"text-xl font-bold text-gray-700",children:"Load pre-computed secondary structures"}),m("div",{className:"mt-2 text-sm",children:["Here you can select some example structures to explore. These sample structures have dot-braket information pre-loaded, so you will not need to run the"," ",f("code",{children:"secondary_structure.py"})," script locally in order to see the secondary structure. Click on one of the PDB ID codes displayed below to load that structure."]})]}),f("div",{className:"flex flex-row flex-wrap gap-4",children:o})]})})};function Er(){const[t,e]=E.exports.useContext(ue),n=E.exports.useContext(Se)[1];E.exports.useEffect(()=>{wr(n),a.onRuntimeInitialized=async()=>{e({type:"isWasmModuleLoading",payload:!1})}},[]);const i=E.exports.useMemo(()=>{if(t.iFinderInstance&&t.selectedResidueHash)return t.iFinderInstance.findResidueByHash(t.selectedResidueHash)},[t.selectedResidueHash]);return m("div",{className:"flex flex-row w-full",children:[!t.isWasmModuleLoading&&m(We,{children:[t.isLoading&&f("div",{className:"fixed top-0 left-0 z-50 flex items-center justify-center w-screen h-full min-h-screen",style:{backgroundColor:"rgba(0,0,0,0.75)"},children:f(qt,{})}),f("div",{className:"z-10 w-9/12 h-screen min-h-full bg-indigo-200",children:f(gr,{})}),f("div",{className:"z-10 w-3/12",children:f(xr,{})}),i&&f(_r,{residue:i}),f(vr,{})]}),t.isWasmModuleLoading&&f("div",{className:"flex flex-col align-center justify-center absolute top-0, left-0 w-full h-screen bg-gray-900/50",children:f(qt,{text:"Application modules are loading"})})]})}function Ar({children:t}){return f(bn,{children:t})}const Sr="modulepreload",Xt={},Tr="/",kr=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${Tr}${i}`,i in Xt)return;Xt[i]=!0;const s=i.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${c}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":Sr,s||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),s)return new Promise((l,d)=>{o.addEventListener("load",l),o.addEventListener("error",d)})})).then(()=>e())},Ir=t=>{t&&t instanceof Function&&kr(()=>import("./web-vitals.d62816c8.js"),[]).then(({getCLS:e,getFID:n,getFCP:i,getLCP:s,getTTFB:c})=>{e(t),n(t),i(t),s(t),c(t)})};un.render(f(Ue.StrictMode,{children:f(Ar,{children:f(Er,{})})}),document.getElementById("root"));Ir()});export default Mr();
