(this.webpackJsonpbmol2d=this.webpackJsonpbmol2d||[]).push([[0],{64:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r,i,s,c,a,o=n(1),u=n.n(o),l=n(25),d=n.n(l),f=(n(64),n(2)),m=n.n(f),b=n(7),p=n(27),j=n(4),h=n(5);!function(e){e.A="\u03b1",e.B="\u03b2",e.G="\u03b3",e.D="\u03b4",e.E="\u03b5",e.Z="\u03b6",e.H="\u03b7"}(r||(r={})),function(e){e[e.DA=0]="DA",e[e.DG=1]="DG",e[e.DC=2]="DC",e[e.DT=3]="DT"}(i||(i={})),function(e){e[e.A=0]="A",e[e.C=1]="C",e[e.G=2]="G",e[e.I=3]="I",e[e.U=4]="U"}(s||(s={})),function(e){e[e.Ala=0]="Ala",e[e.Arg=1]="Arg",e[e.Asn=2]="Asn",e[e.Asp=3]="Asp",e[e.Cys=4]="Cys",e[e.Glu=5]="Glu",e[e.Gln=6]="Gln",e[e.Gly=7]="Gly",e[e.His=8]="His",e[e.Ile=9]="Ile",e[e.Leu=10]="Leu",e[e.Lys=11]="Lys",e[e.Met=12]="Met",e[e.Phe=13]="Phe",e[e.Pro=14]="Pro",e[e.Ser=15]="Ser",e[e.Thr=16]="Thr",e[e.Trp=17]="Trp",e[e.Tyr=18]="Tyr",e[e.Val=19]="Val"}(c||(c={})),function(e){e.DNA="DNA",e.RNA="RNA",e.Protein="Protein",e.Unknown="Unknown"}(a||(a={}));var v=n(26),x=n(0),O={polymers:[],pdb:void 0,isLoading:!1},y=Object(o.createContext)([O,function(){}]),N=function(e,t){var n=t.type,r=t.payload;if(!(n in e))throw new Error("".concat(n," not found in state"));return e[n]=r,Object(v.a)({},e)},g=function(e){var t=e.children,n=Object(o.useReducer)(N,O),r=Object(j.a)(n,2),i=r[0],s=r[1];return Object(x.jsx)(y.Provider,{value:[i,s],children:t})},A=n(15),w=n(16),k=function(){function e(t){Object(A.a)(this,e),this.polymers=t,this.nucleoAcids=[],this.proteins=[]}return Object(w.a)(e,[{key:"calculateInteractions",value:function(){this.nucleoAcids=this.findNucleoAcids(),this.proteins=this.findProteins()}},{key:"findProteins",value:function(){return this.polymers.filter((function(e){return-1!==[a.Protein].indexOf(e.kind)}))}},{key:"findNucleoAcids",value:function(){return this.polymers.filter((function(e){return-1!==[a.DNA,a.RNA].indexOf(e.kind)}))}}]),e}();function P(){var e=Object(o.useContext)(y),t=Object(j.a)(e,2),n=t[0],r=(t[1],n.polymers),i=u.a.createRef(),s=u.a.createRef(),c=[];return r.filter((function(e){return-1!==[a.DNA,a.RNA].indexOf(e.kind)})).map((function(e){e.residues.map((function(e){return c.push.apply(c,Object(p.a)(e.atoms))}))})),Object(o.useEffect)((function(){if(i&&!(r.length<=0)){h.b(i.current).selectAll("*").remove();var e=new k(r).findNucleoAcids(),t=[];e.map((function(e,n){e.residues.map((function(e,r){t.push({x:n,y:r,data:e})}))}));var n=e.map((function(e){return e.residues.length})).reduce((function(e,t){return e>t?e:t})),c=e.length,a=h.a().domain([0,n]).range([40,460]),o=h.a().domain([0,c]).range([200,700]),u=h.b(s.current);h.b(i.current).attr("width",900).attr("height",500).selectAll().data(t).enter().append("circle").attr("cx",(function(e){return o(e.x)})).attr("cy",(function(e){return a(e.y)})).style("fill","#867").attr("r",10).on("mouseover",function(){var e=Object(b.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.b(this).attr("r",15).style("fill","#5ef"),r=n.data,e.prev=2,e.next=5,u.html("Residue: ".concat(r.name," seqno: ").concat(r.sequenceNumber)).transition().duration(50).style("left",t.pageX+"px").style("top",t.pageY+"px").end();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("Something went wrong: ",e.t0);case 10:u.style("opacity",1);case 11:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}()).on("mouseout",(function(e){u.style("opacity",0),h.b(this).attr("r",10).style("fill","#867")}))}}),[r]),Object(x.jsxs)("div",{className:"p-5 flex items-center flex-col",children:[Object(x.jsxs)("div",{children:["Total number of atoms: ",c.length]}),Object(x.jsx)("svg",{ref:i}),Object(x.jsx)("div",{ref:s,style:{position:"absolute",opacity:0,background:"#fff"}})]})}var D=n(3),T=function(){function e(t){Object(A.a)(this,e),this.file=void 0,this.file=t}return Object(w.a)(e,[{key:"readData",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.text();case 2:return t=e.sent,e.abrupt("return",this.format(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"format",value:function(e){return{raw:this.formatText(e),polymers:this.formatPolymers(e)}}},{key:"formatText",value:function(e){return e.split("\n").map((function(e,t){return t.toString()+". "+e})).join("\n")}},{key:"formatPolymers",value:function(e){var t=[],n=function(){return{chainIdentifier:"",residues:[],kind:a.Unknown}},r=function(){c.residues.push(o)},c=n(),o={atoms:[],name:"",sequenceNumber:-1},u=function(e){var t,n=(t={},Object(D.a)(t,a.DNA,0),Object(D.a)(t,a.RNA,0),Object(D.a)(t,a.Protein,0),t);return void 0===e?n:[n,Object.keys(e).reduce((function(t,n){return e[t]>e[n]?t:n}))]},l=u();return e.split("\n").forEach((function(e){if(e.startsWith("ATOM")){var d=parseFloat(e.slice(30,38).trim()),f=parseFloat(e.slice(38,46).trim()),m=parseFloat(e.slice(46,54).trim()),b=e.slice(12,16).trim(),p=e.slice(17,20).trim(),h=e.slice(76,78).trim(),v=parseInt(e.slice(22,26).trim()),x=e.slice(21,22);c.chainIdentifier=x;var O={coords:{x:d,y:f,z:m},name:b,element:h,residueName:p,residueSequenceNumber:v};l[function(e){switch(!0){case e.residueName in i:return a.DNA;case e.residueName in s:return a.RNA;default:return a.Protein}}(O)]++,-1===o.sequenceNumber&&(o.name=O.residueName,o.sequenceNumber=v),v!==o.sequenceNumber&&(r(),(o={atoms:[],name:"",sequenceNumber:-1}).name=O.residueName,o.sequenceNumber=v),o.atoms.push(O)}if(e.startsWith("TER")){r();var y=u(l),N=Object(j.a)(y,2),g=N[0],A=N[1];l=g,c.kind=A,t.push(c),c=n(),o={atoms:[],name:"",sequenceNumber:-1}}})),t}}]),e}();function C(){var e,t,n=Object(o.useContext)(y),r=Object(j.a)(n,2),i=r[0],s=r[1],c=function(){var e=Object(b.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==(r=null===(n=t.target.files)||void 0===n?void 0:n.item(0))&&(s({type:"isLoading",payload:!0}),setTimeout(Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.time("TIME_TO_PARSE_PDB"),e.next=3,new T(r).readData();case 3:t=e.sent,console.timeEnd("TIME_TO_PARSE_PDB"),s({type:"pdb",payload:t});case 6:case"end":return e.stop()}}),e)}))),40500),s({type:"isLoading",payload:!1}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(Object(o.useEffect)((function(){var e;(null===(e=i.pdb)||void 0===e?void 0:e.polymers)&&s({type:"polymers",payload:i.pdb.polymers})}),[i.pdb]),i.polymers.length>0)&&(e=Object(x.jsxs)("div",{className:"mt-5",children:[Object(x.jsx)("div",{className:"mb-1",children:"Provided input file"}),Object(x.jsx)("textarea",{className:"text-sm w-full border h-96 border-blue-100",value:null===(t=i.pdb)||void 0===t?void 0:t.raw,readOnly:!0})]}));return Object(x.jsxs)("div",{className:"p-5 max-h-screen overflow-auto break-words",children:[!i.isLoading&&Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"file",onChange:c})}),e,i.pdb&&Object(x.jsxs)("div",{children:["Polymers from input:",i.polymers.map((function(e,t){var n=e.residues,r=e.chainIdentifier,i=e.kind;return Object(x.jsxs)("div",{className:"ml-2",children:["Chain: ",Object(x.jsxs)("b",{children:[r," (",i,")"]}),Object(x.jsx)("div",{className:"ml-2",children:n.map((function(e,t){return Object(x.jsxs)("span",{children:[e.name," \xa0"]},t)}))})]},t)}))]})]})}n(67);var I=function(){return Object(x.jsxs)("div",{className:"lds-roller",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})};var R=function(){var e=Object(o.useContext)(y)[0];return Object(x.jsx)(g,{children:Object(x.jsxs)("div",{className:"w-full flex flex-row",children:[!0===e.isLoading&&Object(x.jsx)("div",{className:"fixed w-screen min-h-screen top-0 left-0 flex items-center justify-center z-50",style:{backgroundColor:"rgba(0,0,0,0.35)"},children:Object(x.jsx)(I,{})}),Object(x.jsx)("div",{className:"z-10 w-9/12 bg-indigo-300 min-h-full h-screen",children:Object(x.jsx)(P,{})}),Object(x.jsx)("div",{className:"z-10 w-3/12",children:Object(x.jsx)(C,{})})]})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),s(e),c(e)}))};d.a.render(Object(x.jsx)(u.a.StrictMode,{children:Object(x.jsx)(R,{})}),document.getElementById("root")),E()}},[[68,1,2]]]);
//# sourceMappingURL=main.a6c86078.chunk.js.map